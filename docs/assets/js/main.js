"use strict";const searchInput=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-search"),btnReset=document.querySelector(".js-reset"),listCocktails=document.querySelector(".js-cocktail");let listFavorites=document.querySelector(".js-favorite");const btnFavReset=document.querySelector(".js-fav-reset"),urlMargarita="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita";let cocktailData=[],favorites=[];function getFromApi(){const e=searchInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{cocktailData=e.drinks.map(e=>({id:e.idDrink,name:e.strDrink,image:e.strDrinkThumb})),imageEmpty(cocktailData)})}function handleSearchButton(e){e.preventDefault(),getFromApi()}function getLocalStorage(){const e=localStorage.getItem("favorites");if(null===e)listFavorites.innerHTML="";else{const t=JSON.parse(e);favorites=t,renderFavoritesLocal()}}function renderFavoritesLocal(){listFavorites.innerHTML="";for(const e of favorites){const t=document.createElement("li");t.classList.add("js-cocktail__card","card"),t.setAttribute("id",e.id);const a=document.createElement("h2");a.classList.add("card__title");const i=document.createTextNode(e.name),n=document.createElement("img");n.classList.add("card__img"),n.setAttribute("src",e.image),listFavorites.appendChild(t),a.appendChild(i),t.appendChild(a),t.appendChild(n);const c=document.createElement("a");c.setAttribute("id",e.id),c.classList.add("card__favorite--dislbtn","js-dislike-button"),t.appendChild(c);const s=document.createElement("img");s.classList.add("card__favorite--dislimg"),s.src="./assets/images/iconDislike.png",c.appendChild(s)}listenDislikeButton()}function renderFilteredList(e){listCocktails.innerHTML="";for(const t of e){if(isFavorite(t)){const e=document.createElement("li");e.classList.add("js-cocktail__card","card","card__favorite"),e.style.backgroundColor="#9900CC",e.setAttribute("id",t.id);const a=document.createElement("h2");a.classList.add("card__title"),a.style.backgroundColor="#66FFFF";const i=document.createTextNode(t.name),n=document.createElement("img");n.classList.add("card__img"),n.setAttribute("src",t.image),listCocktails.appendChild(e),a.appendChild(i),e.appendChild(a),e.appendChild(n)}else{const e=document.createElement("li");e.classList.add("js-cocktail__card","card"),e.setAttribute("id",t.id);const a=document.createElement("h2");a.classList.add("card__title");const i=document.createTextNode(t.name),n=document.createElement("img");n.classList.add("card__img"),n.setAttribute("src",t.image),listCocktails.appendChild(e),a.appendChild(i),e.appendChild(a),e.appendChild(n)}}getLocalStorage(),listenCardClick(),listenDislikeButton()}function isFavorite(e){return void 0!==favorites.find(t=>t.id===e.id)}function imageEmpty(e){for(const t of e)null===t.image&&(t.image="https://via.placeholder.com/210x295/ffffff/666666/?text=TV");renderFilteredList(e)}function handleCardClick(e){const t=e.currentTarget.id,a=cocktailData.find(e=>e.id===t),i=favorites.findIndex(e=>e.id===t);-1===i?favorites.push(a):favorites.splice(i,1),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()}function setFavInLocalStorage(){const e=JSON.stringify(favorites);localStorage.setItem("favorites",e)}function listenCardClick(){const e=document.querySelectorAll(".js-cocktail__card");for(const t of e)t.addEventListener("click",handleCardClick)}function listenDislikeButton(){const e=document.querySelectorAll(".js-dislike-button");for(const t of e)t.addEventListener("click",handleDislikeClick)}function handleDislikeClick(e){const t=e.currentTarget.id,a=cocktailData.find(e=>e.id===t),i=favorites.findIndex(e=>e.id===t);-1===i?(favorites.push(a),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()):(favorites.splice(i,1),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal())}function handleResetButton(e){e.preventDefault(),listCocktails.innerHTML="",searchInput.value="",favorites=[],setFavInLocalStorage(),renderFavoritesLocal()}function handleFavResetButton(e){e.preventDefault(),listFavorites.innerHTML="",favorites=[],setFavInLocalStorage(),renderFavoritesLocal()}btnSearch.addEventListener("click",handleSearchButton),btnReset.addEventListener("click",handleResetButton),btnFavReset.addEventListener("click",handleFavResetButton);