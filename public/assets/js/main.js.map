{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n//VARIABLES\nconst searchInput = document.querySelector('.js-input');\nconst btnSearch = document.querySelector('.js-search');\nconst btnReset = document.querySelector('.js-reset');\nconst listCocktails = document.querySelector('.js-cocktail');\nlet listFavorites = document.querySelector('.js-favorite');\nconst btnFavReset = document.querySelector('.js-fav-reset');\nconst urlMargarita = ('https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita');\n//ARRAYS\nlet cocktailData = [];\nlet favorites = [];\n\n//Funcion para ejecutar las siguientes funciones\nfunction handleSearchButton(event) {\n  event.preventDefault();\n  getFromApi();\n}\n//Traemos data de la API con fetch\nfunction getFromApi() {\n  const searchValue = searchInput.value;\n  const url =`https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${searchValue}`;\n  fetch(url)\n    .then((response) => response.json())\n    .then((data) => {\n     // console.log('data')\n      cocktailData = data.drinks.map((drink) => {\n        const newDrink = {\n          id: drink.idDrink,\n          name: drink.strDrink,\n          image: drink.strDrinkThumb,\n        };\n        return newDrink;\n      });\n      imageEmpty(cocktailData);\n    });\n}\n//Pintamos en localStorage\nfunction getLocalStorage() {\n  const localStorageFavDrinks = localStorage.getItem('favorites');\n  if (localStorageFavDrinks === null) {\n    //Si en el localStorage esta vacio, no hay favoritos...\n    listFavorites.innerHTML = '';\n  } else {\n    //Si hay fav hago el JSON.parse a la lista que esta en el localStorage\n    const drinkListStored = JSON.parse(localStorageFavDrinks);\n    favorites = drinkListStored;\n    renderFavoritesLocal();\n  }\n}\n//Pintamos lista de Cócteles Fav\nfunction renderFavoritesLocal() {\n  let favClass = '';\n  listFavorites.innerHTML = '';\n  for (const drink of favorites) {\n    //Cramos un elemento li\n    const favCard = document.createElement('li');\n    //Agregamos contenido\n    favCard.classList.add('js-cocktail__card', 'card');\n    favCard.setAttribute('id', drink.id);\n   //Creamos un elemento h2\n    const favCardTitle = document.createElement('h2');\n    favCardTitle.classList.add('card__title');\n    const textFavCardTitle = document.createTextNode(drink.name);\n   //Creamos una img\n    const favCardImg = document.createElement('img');\n    favCardImg.classList.add('card__img');\n    favCardImg.setAttribute('src', drink.image);\n    //Definimos los padres \n    //fav....tiene un hijo que se llama tex...\n    listFavorites.appendChild(favCard);\n    favCardTitle.appendChild(textFavCardTitle);\n    favCard.appendChild(favCardTitle);\n    favCard.appendChild(favCardImg);\n    //Creamos un btn de Dislike\n    const favCardBtn = document.createElement('a');\n    favCardBtn.setAttribute('id', drink.id);\n    favCardBtn.classList.add('card__favorite--dislbtn', 'js-dislike-button');\n    //Definimos el padre\n    favCard.appendChild(favCardBtn);\n    //Creamos img del btn\n    const favCardDislike = document.createElement('img');\n    favCardDislike.classList.add('card__favorite--dislimg');\n    favCardDislike.src = './assets/images/iconDislike.png';\n    //Definimos el padre\n    favCardBtn.appendChild(favCardDislike);\n  }\n  listenDislikeButton();\n}\n//Funcion para pintar la lista de Cócteles \nfunction renderFilteredList(data) {\n  let favClass = '';\n  listCocktails.innerHTML = '';\n  for (const drink of data) {\n    const isFav = isFavorite(drink);\n    if (isFav) {\n     //Creamos un elemento li\n      const favCardList = document.createElement('li');\n      favCardList.classList.add('js-cocktail__card', 'card', 'card__favorite');\n      favCardList.style.backgroundColor = '#9900CC';\n      favCardList.setAttribute('id', drink.id);\n      //Creamos un title h2\n      const favCardListTitle = document.createElement('h2');\n      favCardListTitle.classList.add('card__title');\n      favCardListTitle.style.backgroundColor = '#66FFFF';\n      const textFavCardTitle = document.createTextNode(drink.name);\n      //Añadimos una img\n      const favCardListImg = document.createElement('img');\n      favCardListImg.classList.add('card__img');\n      favCardListImg.setAttribute('src', drink.image);\n      //Definimos los padres\n      listCocktails.appendChild(favCardList);\n      favCardListTitle.appendChild(textFavCardTitle);\n      favCardList.appendChild(favCardListTitle);\n      favCardList.appendChild(favCardListImg);\n    } else {\n     //li\n      const cardList = document.createElement('li');\n      cardList.classList.add('js-cocktail__card', 'card');\n      cardList.setAttribute('id', drink.id);\n      //h2\n      const cardListTitle = document.createElement('h2');\n      cardListTitle.classList.add('card__title', );\n      const textCardTitle = document.createTextNode(drink.name);\n      //img\n      const cardListImg = document.createElement('img');\n      cardListImg.classList.add('card__img');\n      cardListImg.setAttribute('src', drink.image);\n      //Padres\n      listCocktails.appendChild(cardList);\n      cardListTitle.appendChild(textCardTitle);\n      cardList.appendChild(cardListTitle);\n      cardList.appendChild(cardListImg);\n    }\n  }\n  getLocalStorage();\n  listenCardClick();\n  listenDislikeButton();\n}\n\nfunction isFavorite(data) {\n  const favoriteFound = favorites.find((fav) => {\n    return fav.id === data.id;\n  });\n  if (favoriteFound === undefined) {\n    return false;\n  } else {\n    return true;\n  }\n}\n//Función para mostrar img re relleno si no tiene\nfunction imageEmpty(data) {\n  for (const drink of data) {\n    if (drink.image === null) {\n      drink.image =`https://via.placeholder.com/210x295/ffffff/666666/?text=TV`;\n    }\n  }\n  renderFilteredList(data);\n}\n//Función callback: buscamos un Cóctel(elemento) con Find y fav segun su posición con FindIndex\n//Condicional: usando Push, si no Splice  \nfunction handleCardClick(event) {\n  const clickedItemId = event.currentTarget.id;\n  const objetClicked = cocktailData.find((itemDrink) => {\n    return itemDrink.id === clickedItemId;\n  });\n  const favoritesFound = favorites.findIndex((fav) => {\n    return fav.id === clickedItemId;\n  });\n  if (favoritesFound === -1) {\n    favorites.push(objetClicked);\n  } else {\n    favorites.splice(favoritesFound, 1);\n  }\n  setFavInLocalStorage();\n  renderFilteredList(cocktailData);\n  renderFavoritesLocal();\n}\n//Función para guardar fav en el LocalSorage con JSON.stringify\nfunction setFavInLocalStorage() {\n  const stringFavDrinks = JSON.stringify(favorites);\n  localStorage.setItem('favorites', stringFavDrinks);\n}\n//Función del Click en las tarjetas\nfunction listenCardClick() {\n  const cocktailCard = document.querySelectorAll('.js-cocktail__card');\n  for (const drinkItem of cocktailCard) {\n    drinkItem.addEventListener('click', handleCardClick);\n  }\n}\n//Función del btn para borrar el favorito clicado de la lista y del localStorage\nfunction listenDislikeButton() {\n  const dislikeButton = document.querySelectorAll('.js-dislike-button');\n  for (const dislikeItem of dislikeButton) {\n    dislikeItem.addEventListener('click', handleDislikeClick);\n  }\n}\n//Función click dislike\nfunction handleDislikeClick(event) {\n  const clickedItemId = event.currentTarget.id;\n  const objetClicked = cocktailData.find((itemDrink) => {\n    return itemDrink.id === clickedItemId;\n  });\n  const favoritesFound = favorites.findIndex((fav) => {\n    return fav.id === clickedItemId;\n  });\n  if (favoritesFound === -1) {\n    favorites.push(objetClicked);\n    setFavInLocalStorage();\n    renderFilteredList(cocktailData);\n    renderFavoritesLocal();\n  } else {\n    favorites.splice(favoritesFound, 1);\n    setFavInLocalStorage();\n    renderFilteredList(cocktailData);\n    renderFavoritesLocal();\n  }\n}\n//Función del btn de Reset\nfunction handleResetButton(event) {\n  event.preventDefault();\n  listCocktails.innerHTML = '';\n  searchInput.value = '';\n  favorites = [];\n  setFavInLocalStorage();\n  renderFavoritesLocal();\n}\n//Función del btn para borrar todos los favoritos a la vez\nfunction handleFavResetButton(event) {\n  event.preventDefault();\n  listFavorites.innerHTML = '';\n  favorites = [];\n  setFavInLocalStorage();\n  renderFavoritesLocal();\n}\n//Escuchamos evento del btn\nbtnSearch.addEventListener('click', handleSearchButton);\nbtnReset.addEventListener('click', handleResetButton);\nbtnFavReset.addEventListener('click', handleFavResetButton);\n\n\n\n\n"]}